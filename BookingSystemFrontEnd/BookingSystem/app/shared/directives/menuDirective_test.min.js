describe("directive: menuDirective",function(){beforeEach(module("bookingSystem"));beforeEach(module("ngRoute"));beforeEach(module("bookingSystem.commonFilters"));beforeEach(module("bookingSystem.menuDirective"));beforeEach(module("templates"));var testCurrentDateObj;var $scope;var q;var $location;var mainMenuElement;var mainMenuController;var menusArray;var $route;var $routeParams;beforeEach(inject(function($route,$routeParams,$controller,$rootScope,$compile,_$q_,_$location_,$httpBackend){$httpBackend.expectGET("controllers/customer/customerList.html").respond(200);testCurrentDateObj=new Date;$location=_$location_;q=_$q_;spyOn($location,"path").andReturn("/kunder/lista");$scope=$rootScope;$scope.flaps={};$scope.menusArray=TestHelper.JSON.MockedMenu;var mainMenuElem=angular.element('<main-menu menu-items="menusArray" page-flaps="flaps"></page-header-buttons>');mainMenuElement=$compile(mainMenuElem)($scope);$scope.$digest();mainMenuController=mainMenuElement.controller("mainMenu");$scope=mainMenuElement.isolateScope()}));it("should have correct menu values after init",function(){expect($scope.menuItems).toEqual(TestHelper.JSON.MockedMenu);$scope.menuItems.forEach(function(menuItem,index){if(menuItem.title==="Kunder"){expect(menuItem.isMenuActive).toEqual(true);expect(menuItem.isFlapActive).toEqual(true)}})});it("should have correct values after click on main menu",function(){$scope.selectMainMenu($scope.menuItems[0]);$scope.menuItems.forEach(function(menuItem,index){if(menuItem.title==="Start"){expect(menuItem.isMenuActive).toEqual(true);expect(menuItem.isSubMenusVisible).toEqual(true)}})});it("should have correct values after click on sub menu",function(){$scope.selectMainMenu($scope.menuItems[0]);$scope.selectSubMenu($scope.menuItems[0].submenus[0]);$scope.menuItems.forEach(function(menuItem,index){if(menuItem.title==="Start"){expect(menuItem.isMenuActive).toEqual(true);expect(menuItem.isSubMenusVisible).toEqual(false)}})})});