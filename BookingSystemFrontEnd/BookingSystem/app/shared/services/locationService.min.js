(function(){angular.module("bookingSystem.locationServices",["ngResource","bookingSystem.furnituringServices"]).factory("Location",["$resource","API_URL",function($resource,API_URL){return $resource(API_URL+"Location/:locationId",{locationId:"@locationId"},{queryFreeForPeriod:{url:API_URL+"Location/free/:fromDate/:toDate",id:"@id",method:"GET",isArray:true,params:{fromDate:"@fromDate",toDate:"@toDate"}},querySearch:{url:API_URL+"Location/search/:column",id:"@id",method:"GET",isArray:true,params:{column:"@column"}}})}]).factory("LocationImage",["$http","API_URL",function($http,API_URL){return{upload:function(imageData,locationId){return $http({method:"POST",url:API_URL+"Location/image/"+locationId,data:imageData,headers:{"Content-Type":undefined}})}}}]).factory("LocationFurnituringHelper",["LocationFurnituring","Furnituring",function(LocationFurnituring,Furnituring){return{getCombined:function(locationId){var furniturings,locationFurniturings;furniturings=Furnituring.query();locationFurniturings=LocationFurnituring.queryForLocation({locationId:locationId});furniturings.$promise.finally(function(){locationFurniturings.$promise.finally(function(){furniturings.forEach(function(availableFurnituring){var match=false;locationFurniturings.forEach(function(locationFurnituring){if(availableFurnituring.FurnituringId==locationFurnituring.FurnituringId){availableFurnituring.Selected=true;availableFurnituring.MaxPeople=locationFurnituring.MaxPeople;match=true}});if(!match){availableFurnituring.Selected=false;availableFurnituring.MaxPeople=0}})})});return furniturings}}}])})();