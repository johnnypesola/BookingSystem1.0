describe("module: bookingSystem.locationBooking",function(){beforeEach(module("bookingSystem"));beforeEach(module("bookingSystem.locationBooking"));beforeEach(module("bookingSystem.commonFilters"));var LocationBookingListCtrl,LocationBookingCreateCtrl,LocationBookingEditCtrl;var testCurrentDateObj;var $scope;var $location;var $rootScope;beforeEach(function(){module(function($provide){$provide.factory("LocationBooking",function($q){return{get:jasmine.createSpy("get").andCallFake(function(){return TestHelper.addPromiseToObject(TestHelper.JSON.getLocationBooking,$q)}),query:jasmine.createSpy("query").andCallFake(function(){return TestHelper.addPromiseToObject(TestHelper.JSON.queryLocationBooking,$q)}),queryMoreForPeriod:jasmine.createSpy("queryMoreForPeriod").andCallFake(function(){return TestHelper.addPromiseToObject(TestHelper.JSON.queryLocationBooking,$q)}),save:jasmine.createSpy("save").andCallFake(function(){return TestHelper.addPromiseToObject({},$q)}),"delete":jasmine.createSpy("delete").andCallFake(function(){return TestHelper.addPromiseToObject({},$q)})}})})});beforeEach(inject(function($controller,_LocationBooking_,_$location_,$rootScope){$location=_$location_;$scope=$rootScope;testCurrentDateObj=new Date;LocationBookingListCtrl=$controller("LocationBookingListCtrl",{$scope:$scope,LocationBooking:_LocationBooking_,$rootScope:$rootScope})}));describe("LocationBookingListCtrl controller",function(){var testDateVars=function(){expect($scope.currentYear).toEqual(testCurrentDateObj.getFullYear());expect(LocationBookingListCtrl.currentMonth).toEqual(testCurrentDateObj.getMonth());expect($scope.currentMonthName).toEqual(moment(testCurrentDateObj).format("MMMM"));expect(LocationBookingListCtrl.currentMonthNumberOfDays).toEqual(new Date(testCurrentDateObj.getFullYear(),testCurrentDateObj.getMonth()+1,0).getDate());expect(LocationBookingListCtrl.currentMonthStartDateObj).toEqual(new Date(testCurrentDateObj.getFullYear(),testCurrentDateObj.getMonth(),1));expect(LocationBookingListCtrl.currentMonthEndDateObj).toEqual(new Date(testCurrentDateObj.getFullYear(),testCurrentDateObj.getMonth(),LocationBookingListCtrl.currentMonthNumberOfDays))};it("should have correct initialization (date) variables",inject(function($controller,_Booking_){$scope.$digest();expect(LocationBookingListCtrl).toBeDefined();expect($scope.currentYear).toBeDefined();testDateVars()}));it("should have correct variables after change to next month",inject(function($controller,_LocationBooking_){$scope.changeToNextMonth();testCurrentDateObj=new Date(testCurrentDateObj.getFullYear(),testCurrentDateObj.getMonth()+1);testDateVars()}));it("should have correct (date) variables after changeToPreviousMonth() method",inject(function($controller,_LocationBooking_){$scope.changeToPreviousMonth();testCurrentDateObj=new Date(testCurrentDateObj.getFullYear(),testCurrentDateObj.getMonth()-1);testDateVars()}));it("should have correct booking data after getLocationBookings() method",inject(function($controller,_LocationBooking_){LocationBookingListCtrl.getLocationBookings();expect(_LocationBooking_.queryMoreForPeriod).toHaveBeenCalled();expect($scope.locationBookings).toEqual(TestHelper.JSON.queryLocationBooking)}))})});