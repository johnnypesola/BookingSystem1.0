describe("module: bookingSystem.startPage",function(){beforeEach(module("bookingSystem"));beforeEach(module("bookingSystem.startPage"));beforeEach(module("bookingSystem.commonFilters"));var StartCtrl;var testCurrentDateObj;var $scope;var $location;var $rootScope;beforeEach(function(){module(function($provide){$provide.factory("Booking",function($q){return{get:jasmine.createSpy("get").andCallFake(function(){return TestHelper.addPromiseToObject(TestHelper.JSON.getBookings,$q)}),query:jasmine.createSpy("query").andCallFake(function(){return TestHelper.addPromiseToObject(TestHelper.JSON.queryBookings,$q)}),save:jasmine.createSpy("save").andCallFake(function(){return TestHelper.addPromiseToObject({},$q)}),"delete":jasmine.createSpy("delete").andCallFake(function(){return TestHelper.addPromiseToObject({},$q)}),countEmpty:jasmine.createSpy("countEmpty").andCallFake(function(){return TestHelper.addPromiseToObject(TestHelper.JSON.countEmpty,$q)}),queryMoreForPeriod:jasmine.createSpy("queryMoreForPeriod").andCallFake(function(){return TestHelper.addPromiseToObject(TestHelper.JSON.queryBookings,$q)})}});$provide.factory("Location",function($q){return{get:jasmine.createSpy("get").andCallFake(function(){return TestHelper.addPromiseToObject(TestHelper.JSON.getLocation,$q)}),query:jasmine.createSpy("query").andCallFake(function(){return TestHelper.addPromiseToObject(TestHelper.JSON.queryLocation,$q)}),queryFreeForPeriod:jasmine.createSpy("queryFreeForPeriod").andCallFake(function(){return TestHelper.addPromiseToObject(TestHelper.JSON.queryLocation,$q)}),save:jasmine.createSpy("save").andCallFake(function(){return TestHelper.addPromiseToObject({LocationId:3},$q)}),"delete":jasmine.createSpy("delete").andCallFake(function(){return TestHelper.addPromiseToObject({},$q)})}})})});beforeEach(inject(function($controller,_Booking_,_$location_,$rootScope,_Location_){$location=_$location_;$scope=$rootScope;StartCtrl=$controller("StartCtrl",{$scope:$scope,Booking:_Booking_,Location:_Location_,$rootScope:$rootScope})}));describe("StartPageCtrl controller",function(){it("should have correct values after init.",inject(function($rootScope,$controller,_Booking_,_Location_){spyOn(history,"back");$scope.$digest();expect($scope.emptyBookings).toEqual(TestHelper.JSON.countEmpty);expect($scope.bookingsForToday).toEqual(TestHelper.JSON.queryBookings);expect($scope.locationsFreeForToday).toEqual(TestHelper.JSON.queryLocation)}))})});