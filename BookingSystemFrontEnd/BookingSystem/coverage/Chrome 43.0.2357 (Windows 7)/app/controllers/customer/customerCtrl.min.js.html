<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for ./app/controllers/customer/customerCtrl.min.js</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="../../../prettify.css">
    <link rel="stylesheet" href="../../../base.css">
    <style type='text/css'>
        div.coverage-summary .sorter {
            background-image: url(../../../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class="header medium">
    <h1>Code coverage report for <span class="entity">./app/controllers/customer/customerCtrl.min.js</span></h1>
    <h2>
        Statements: <span class="metric">64.2% <small>(52 / 81)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Branches: <span class="metric">88% <small>(22 / 25)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Functions: <span class="metric">53.13% <small>(17 / 32)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Lines: <span class="metric">100% <small>(1 / 1)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../../index.html">All files</a> &#187; <a href="index.html">./app/controllers/customer/</a> &#187; customerCtrl.min.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1</td><td class="line-coverage"><span class="cline-any cline-yes">5</span></td><td class="text"><pre class="prettyprint lang-js">(function(){angular.module("bookingSystem.customer",["bookingSystem.customerServices","bookingSystem.commonFilters","bookingSystem.commonDirectives"]).config(["$routeProvider",function($routeProvider){}]).controller("CustomerShowCtrl",["$scope","$routeParams","$location","$rootScope","Customer","PHOTO_MISSING_SRC","API_IMG_PATH_URL",<span class="fstat-no" title="function not covered" >function($scope,$routeParams,$location,$rootScope,Customer,PHOTO_MISSING_SRC,API_IMG_PATH_URL){<span class="cstat-no" title="statement not covered" ></span>var that=this;<span class="cstat-no" title="statement not covered" >$</span>scope.customer=Customer.get({customerId:$routeParams.customerId});<span class="cstat-no" title="statement not covered" >$</span>scope.customer.$promise.then(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>$scope.customer.ImageSrc=$scope.customer.ImageSrc===""?PHOTO_MISSING_SRC:API_IMG_PATH_URL+$scope.customer.ImageSrc}</span>).catch(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>$rootScope.FlashMessage={type:"error",message:"Kunden kunde inte hämtas, var god försök igen."};<span class="cstat-no" title="statement not covered" >$</span>scope.customer=null}</span>)}</span>]).controller("CustomerListCtrl",["$scope","Customer","$rootScope",function($scope,Customer,$rootScope){var customers=Customer.query();customers.$promise.catch(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>$rootScope.FlashMessage={type:"error",message:"Kunder kunde inte hämtas, var god försök igen."}}</span>);$scope.customers=customers}]).controller("CustomerCreateCtrl",["$scope","$routeParams","$location","$rootScope","Customer","Redirect","CustomerImage",function($scope,$routeParams,$location,$rootScope,Customer,Redirect,CustomerImage){var that=this;that.uploadImage=function(CustomerId){var customerImageHttp;customerImageHttp=CustomerImage.upload($scope.customer.ImageForUpload,CustomerId);return customerImageHttp};$scope.save=function(){Customer.save({CustomerId:0,Name:$scope.customer.Name,Address:$scope.customer.Address,PostNumber:$scope.customer.PostNumber,City:$scope.customer.City,EmailAddress:$scope.customer.EmailAddress,PhoneNumber:$scope.customer.PhoneNumber,CellPhoneNumber:$scope.customer.CellPhoneNumber,ParentCustomerId:$scope.customer.ParentCustomerId,ImageSrc:$scope.customer.ImageSrc,Notes:$scope.customer.Notes}).$promise.then(function(response){that.uploadImage(response.CustomerId).success(<span class="fstat-no" title="function not covered" >function(data){<span class="cstat-no" title="statement not covered" ></span>$rootScope.FlashMessage={type:"success",message:'Kunden "'+$scope.customer.Name+'" skapades med ett lyckat resultat'};<span class="cstat-no" title="statement not covered" >h</span>istory.back()}</span>).error(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>$rootScope.FlashMessage={type:"error",message:'Kunden "'+$scope.customer.Name+'" skapades, men det gick inte att ladda upp och spara den önskade bilden.'};<span class="cstat-no" title="statement not covered" >h</span>istory.back()}</span>)}).catch(function(response){if(response.status==409){$rootScope.FlashMessage={type:"error",message:'Det finns redan en kund som heter "'+$scope.customer.Name+'". Två kunder kan inte heta lika.'}}else{$rootScope.FlashMessage={type:"error",message:"Ett oväntat fel uppstod när kunden skulle sparas"}}})};$scope.customers=Customer.query()}]).controller("CustomerEditCtrl",["$scope","$routeParams","$location","$rootScope","Customer","CustomerImage",function($scope,$routeParams,$location,$rootScope,Customer,CustomerImage){var that=this;that.uploadImage=<span class="fstat-no" title="function not covered" >function(CustomerId){<span class="cstat-no" title="statement not covered" ></span>var customerImageHttp;<span class="cstat-no" title="statement not covered" >c</span>ustomerImageHttp=CustomerImage.upload($scope.customer.ImageForUpload,CustomerId);<span class="cstat-no" title="statement not covered" >r</span>eturn customerImageHttp}</span>;that.saveSuccess=function(){$rootScope.FlashMessage={type:"success",message:'Kunden "'+$scope.customer.Name+'" sparades med ett lyckat resultat'};history.back()};$scope.save=function(){Customer.save({CustomerId:$routeParams.customerId,Name:$scope.customer.Name,Address:$scope.customer.Address,PostNumber:$scope.customer.PostNumber,City:$scope.customer.City,EmailAddress:$scope.customer.EmailAddress,PhoneNumber:$scope.customer.PhoneNumber,CellPhoneNumber:$scope.customer.CellPhoneNumber,ParentCustomerId:$scope.customer.ParentCustomerId,ImageSrc:$scope.customer.ImageSrc,Notes:$scope.customer.Notes}).$promise.then(function(response){<span class="missing-if-branch" title="if path not taken" >I</span>if(typeof $scope.customer.ImageForUpload!=="undefined"){<span class="cstat-no" title="statement not covered" >that.uploadImage(response.CustomerId).success(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>that.saveSuccess()}</span>).error(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>$rootScope.FlashMessage={type:"error",message:"Kunden sparades, men det gick inte att ladda upp och spara den önskade bilden."}}</span>)}</span>else{that.saveSuccess()}}).catch(function(response){if(response.status==409){$rootScope.FlashMessage={type:"error",message:'Det finns redan en kund som heter "'+$scope.customer.Name+'". Två kunder kan inte heta lika.'}}else if(response.status==400||response.status==500){$rootScope.FlashMessage={type:"error",message:"Ett oväntat fel uppstod när kunden skulle sparas"}}if(response.status==404){$rootScope.FlashMessage={type:"error",message:'Kunden "'+$scope.customer.Name+'" existerar inte längre. Hann kanske någon radera den?'};history.back()}})};that.customer=Customer.get({customerId:$routeParams.customerId});$scope.customers=Customer.query();that.customer.$promise.catch(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>$rootScope.FlashMessage={type:"error",message:"Kunden kunde inte hämtas, var god försök igen."};<span class="cstat-no" title="statement not covered" >$</span>scope.customer=null}</span>);$scope.customer=that.customer}]).controller("CustomerDeleteCtrl",["$scope","$routeParams","Customer","$location","$rootScope",function($scope,$routeParams,Customer,$location,$rootScope){var that=this;$scope.confirm=function(){Customer.delete({customerId:$routeParams.customerId}).$promise.then(function(response){$rootScope.FlashMessage={type:"success",message:'Kunden "'+$scope.customer.Name+'" raderades med ett lyckat resultat'};history.back()}).catch(function(response){if(response.status==400&amp;&amp;response.data.Message!=="undefined"&amp;&amp;response.data.Message==="Foreign key references exists"){$rootScope.FlashMessage={type:"error",message:"Kunden kan inte raderas eftersom det finns"+" en annan kund eller ett bokningstillfälle som refererar till kunden"}}else if(response.status==400||response.status==500){$rootScope.FlashMessage={type:"error",message:"Ett oväntat fel uppstod när kunden skulle tas bort"}}if(response.status==404){$rootScope.FlashMessage={type:"error",message:'Kunden "'+$scope.customer.Name+'" existerar inte längre. Hann kanske någon radera den?'}}history.back()})};var customer=Customer.get({customerId:$routeParams.customerId});customer.$promise.catch(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>$rootScope.FlashMessage={type:"error",message:"Kunden kunde inte hämtas, var god försök igen."};<span class="cstat-no" title="statement not covered" >$</span>scope.customer=null}</span>);$scope.customer=customer}]).controller("CustomerSearchCtrl",["$scope","Customer","$rootScope",<span class="fstat-no" title="function not covered" >function($scope,Customer,$rootScope){<span class="cstat-no" title="statement not covered" ></span>var that=this;<span class="cstat-no" title="statement not covered" >v</span>ar currentDateObj;<span class="cstat-no" title="statement not covered" >$</span>scope.search=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>$scope.searchResults=Customer.querySearch({column:$scope.searchColumn,value:$scope.searchValue});<span class="cstat-no" title="statement not covered" >$</span>scope.searchResults.$promise.then(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>$scope.noSearchResultsFound=!$scope.searchResults.length}</span>).catch(<span class="fstat-no" title="function not covered" >function(response){<span class="cstat-no" title="statement not covered" ></span>$rootScope.FlashMessage={type:"error",message:"Ett oväntat fel uppstod när sökresultaten hämtades. Var god försök igen."}}</span>)}</span>;<span class="cstat-no" title="statement not covered" >$</span>scope.searchColumn="Name"}</span>])})();</pre></td></tr>
</table></pre>

</div>
<div class="footer">
    <div class="meta">Generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Sun May 31 2015 21:26:57 GMT+0200 (Västeuropa, sommartid)</div>
</div>
<script src="../../../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../../../sorter.js"></script>
</body>
</html>
